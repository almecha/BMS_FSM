Currently, I am doing the FSM using [this tool](https://github.com/unclebob/CC_SMC/tree/master/src).  
Errors implementation, charging, and driving are done using Super states (abstract states).  
It is not nearly finished, work in progress.
